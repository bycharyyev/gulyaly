
> gulyaly@0.1.0 build
> next build

тЪа Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of C:\Users\miste\package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * C:\Users\miste\Downloads\codeakgus\package-lock.json

тЦ▓ Next.js 16.1.1 (Turbopack)
- Environments: .env

  Creating an optimized production build ...
тЬУ Compiled successfully in 11.9s
  Running TypeScript ...
Failed to compile.

./lib/auth-broken.ts:21:13
Type error: Type '(credentials: Partial<Record<"phone" | "email" | "password", unknown>>) => Promise<{ id: string; email: {}; name: string; role: string; phone?: undefined; } | { id: string; phone: {}; name: string; role: string; email?: undefined; } | null | undefined>' is not assignable to type '(credentials: Partial<Record<"phone" | "email" | "password", unknown>>, request: Request) => Awaitable<User | null>'.
  Type 'Promise<{ id: string; email: {}; name: string; role: string; phone?: undefined; } | { id: string; phone: {}; name: string; role: string; email?: undefined; } | null | undefined>' is not assignable to type 'Awaitable<User | null>'.
    Type 'Promise<{ id: string; email: {}; name: string; role: string; phone?: undefined; } | { id: string; phone: {}; name: string; role: string; email?: undefined; } | null | undefined>' is not assignable to type 'PromiseLike<User | null>'.
      Types of property 'then' are incompatible.
        Type '<TResult1 = { id: string; email: {}; name: string; role: string; phone?: undefined; } | { id: string; phone: {}; name: string; role: string; email?: undefined; } | null | undefined, TResult2 = never>(onfulfilled?: ((value: { id: string; email: {}; name: string; role: string; phone?: undefined; } | { ...; } | null | ...' is not assignable to type '<TResult1 = User | null, TResult2 = never>(onfulfilled?: ((value: User | null) => TResult1 | PromiseLike<TResult1>) | null | undefined, onrejected?: ((reason: any) => TResult2 | PromiseLike<...>) | null | undefined) => PromiseLike<...>'.
          Types of parameters 'onfulfilled' and 'onfulfilled' are incompatible.
            Types of parameters 'value' and 'value' are incompatible.
              Type '{ id: string; email: {}; name: string; role: string; phone?: undefined; } | { id: string; phone: {}; name: string; role: string; email?: undefined; } | null | undefined' is not assignable to type 'User | null'.
                Type 'undefined' is not assignable to type 'User | null'.

  19 |         password: { label: "Password", type: "password" },
  20 |       },
> 21 |       async authorize(credentials) {
     |             ^
  22 |         console.log('ЁЯФН [NEXTAUTH] ╨Я╨╛╨┐╤Л╤В╨║╨░ ╨░╨▓╤В╨╛╤А╨╕╨╖╨░╤Ж╨╕╨╕:', {
  23 |           email: credentials.email,
  24 |           phone: credentials.phone,
Next.js build worker exited with code: 1 and signal: null
